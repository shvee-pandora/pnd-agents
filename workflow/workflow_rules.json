{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "PND Agents Workflow Rules Configuration",
  "version": "2.1.0",
  "workflows": {
    "figma": ["figma", "frontend", "review", "unit_test", "sonar", "performance"],
    "frontend": ["frontend", "review", "unit_test", "sonar", "performance"],
    "backend": ["backend", "review", "unit_test", "sonar"],
    "amplience": ["amplience", "frontend", "review", "unit_test", "sonar"],
    "qa": ["unit_test", "review", "sonar"],
    "unit_test": ["unit_test", "sonar"],
    "sonar": ["sonar", "review"],
    "code_review": ["review", "sonar"],
    "performance": ["performance", "frontend", "review"],
    "default": ["frontend", "review", "unit_test", "sonar"]
  },
  "keywords": {
    "figma": [
      "figma",
      "design",
      "frame",
      "component",
      "ui spec",
      "figma.com",
      "from design",
      "design file"
    ],
    "frontend": [
      "react",
      "component",
      "tsx",
      "ui",
      "frontend",
      "next.js",
      "nextjs",
      "jsx",
      "styled",
      "css"
    ],
    "backend": [
      "api",
      "endpoint",
      "server",
      "route",
      "integration",
      "backend",
      "rest",
      "graphql",
      "database"
    ],
    "amplience": [
      "content type",
      "cms",
      "schema",
      "amplience",
      "content model",
      "dynamic content"
    ],
    "qa": [
      "tests",
      "automation",
      "playwright",
      "testing",
      "test cases",
      "e2e",
      "integration tests"
    ],
    "unit_test": [
      "unit tests",
      "unit test",
      "coverage",
      "jest",
      "vitest",
      "100% coverage",
      "test coverage",
      "write tests"
    ],
    "sonar": [
      "sonar",
      "sonarcloud",
      "sonarqube",
      "code quality",
      "quality gate",
      "duplication",
      "code smells",
      "vulnerabilities",
      "security hotspot"
    ],
    "code_review": [
      "review",
      "lint",
      "standards",
      "refactor",
      "code quality",
      "eslint",
      "prettier"
    ],
    "performance": [
      "har",
      "performance",
      "optimize",
      "slow",
      "lighthouse",
      "web vitals",
      "speed"
    ]
  },
  "agents": {
    "figma": {
      "name": "Figma Parser Agent",
      "description": "Extract component structure from Figma design",
      "handler": "figma_reader_agent.run",
      "input": ["figma_url", "node_id"],
      "output": ["component", "design_tokens", "assets", "variants"]
    },
    "frontend": {
      "name": "Frontend Engineer Agent",
      "description": "Generate React components",
      "handler": "frontend_agent.create_component",
      "input": ["component_spec", "design_tokens"],
      "output": ["files", "imports", "styles"]
    },
    "backend": {
      "name": "Backend Agent",
      "description": "Create API endpoints and server components",
      "handler": "backend_agent.create_endpoint",
      "input": ["endpoint_spec"],
      "output": ["route_file", "schema"]
    },
    "amplience": {
      "name": "Amplience CMS Agent",
      "description": "Generate Amplience content type schemas",
      "handler": "amplience_agent.generate_schema",
      "input": ["content_type_name", "fields"],
      "output": ["schema", "example_payload"]
    },
    "review": {
      "name": "Code Review Agent",
      "description": "Validate code against standards",
      "handler": "code_review_agent.run_review",
      "input": ["files"],
      "output": ["issues", "suggestions", "passed"]
    },
    "qa": {
      "name": "QA Agent",
      "description": "Generate unit and integration tests",
      "handler": "qa_agent.run_tests",
      "input": ["component_spec", "files"],
      "output": ["test_files", "test_cases", "coverage"]
    },
    "performance": {
      "name": "Performance Agent",
      "description": "Run performance analysis and optimization checks",
      "handler": "performance_agent.analyze",
      "input": ["files", "har_file"],
      "output": ["recommendations", "score"]
    },
    "unit_test": {
      "name": "Unit Test Agent",
      "description": "Generate comprehensive unit tests with 100% coverage target",
      "handler": "unit_test_agent.run",
      "input": ["files", "component_spec"],
      "output": ["test_files", "test_cases", "coverage_report", "recommendations"]
    },
    "sonar": {
      "name": "Sonar Validation Agent",
      "description": "Validate code against SonarCloud quality gates (0 errors, 0 duplication, 100% coverage)",
      "handler": "sonar_validation_agent.run",
      "input": ["branch", "repo_path"],
      "output": ["issues", "fix_plans", "coverage", "pr_checklist", "quality_gate_status"]
    }
  },
  "defaults": {
    "continueOnError": false,
    "maxRetries": 2,
    "timeout": 300000,
    "contextFile": "/tmp/pnd_agent_context.json"
  }
}
